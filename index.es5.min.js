"use strict";var CompressionPlugin=require("compression-webpack-plugin"),zopfli=require("@gfx/zopfli"),defaultOptions={brotli:!0,gzip:!1,zopfli:!0,gzipBoth:!1,gzipSettings:{filename:"[path].gz[query]",algorithm:"gzip",test:/\.(js|css|html|svg|md)$/,compressionOptions:{level:9},threshold:8192,minRatio:.8,deleteOriginalAssets:!1,cache:!1},brotliSettings:{filename:"[path].br[query]",algorithm:"brotliCompress",test:/\.(js|css|html|svg|md)$/,compressionOptions:{level:11},threshold:10240,minRatio:.8,deleteOriginalAssets:!1,cache:!1},zopfliSettings:{filename:"[path].gz[query]",test:/\.(js|css|html|svg|md)$/,threshold:8192,minRatio:.8,deleteOriginalAssets:!1,cache:!1,compressionOptions:{numiterations:15},algorithm:function(i,e,t){return zopfli.gzip(i,e,t)}}},inject=function(i,e,t){var s=e.target,o=e.dev,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=!1===o,p="web"===s,r=Object.assign({},i);if(p&&l){var g,a=Object.assign({},defaultOptions,n),m=[],h=a.gzip,u=a.brotli,c=a.zopfli,z=a.gzipBoth,f=a.gzipSettings,d=a.brotliSettings,b=a.zopfliSettings;z&&h&&c?b.filename="[path].zopfli.gz[query]":!z&&h&&c&&(h=!1),h&&m.push(new CompressionPlugin(f)),u&&m.push(new CompressionPlugin(d)),c&&m.push(new CompressionPlugin(b)),(g=r.plugins).push.apply(g,m)}return r};module.exports=inject;